<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="se233.cropedgestudio.controllers.EdgeDetectionController"
      spacing="20" alignment="CENTER">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <HBox spacing="20" alignment="CENTER">
        <Button text="Open Image" onAction="#handleOpenImage" />
        <ComboBox fx:id="algorithmChoice" promptText="Select Algorithm" />
        <Button text="Batch Process" onAction="#handleBatchProcessing">
            <tooltip>
                <Tooltip text="Process multiple images at once" />
            </tooltip>
        </Button>
    </HBox>

    <TabPane fx:id="algorithmTabPane" VBox.vgrow="ALWAYS">
        <Tab text="Roberts Cross" closable="false">
            <VBox spacing="10" alignment="CENTER">
                <HBox spacing="20" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="Before" />
                        <ImageView fx:id="robertsBeforeImageView" fitWidth="300" fitHeight="300" preserveRatio="true" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="After" />
                        <ImageView fx:id="robertsAfterImageView" fitWidth="300" fitHeight="300" preserveRatio="true" />
                    </VBox>
                </HBox>
                <HBox spacing="10" alignment="CENTER">
                    <Label text="Strength:" />
                    <Slider fx:id="robertsStrengthSlider" min="1" max="100" value="50" showTickLabels="true" showTickMarks="true" />
                    <Label fx:id="robertsStrengthLabel" text="50" />
                </HBox>
                <Button text="DETECT!" onAction="#applyRobertsCross" />
            </VBox>
        </Tab>
        <Tab text="Sobel-Feldman" closable="false">
            <VBox spacing="10" alignment="CENTER">
                <HBox spacing="20" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="Before" />
                        <ImageView fx:id="sobelBeforeImageView" fitWidth="300" fitHeight="300" preserveRatio="true" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="After" />
                        <ImageView fx:id="sobelAfterImageView" fitWidth="300" fitHeight="300" preserveRatio="true" />
                    </VBox>
                </HBox>
                <Button text="DETECT!" onAction="#applySobel" />
            </VBox>
        </Tab>
        <Tab text="Laplacian" closable="false">
            <VBox spacing="10" alignment="CENTER">
                <HBox spacing="20" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="Before" />
                        <ImageView fx:id="laplacianBeforeImageView" fitWidth="300" fitHeight="300" preserveRatio="true" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="After" />
                        <ImageView fx:id="laplacianAfterImageView" fitWidth="300" fitHeight="300" preserveRatio="true" />
                    </VBox>
                </HBox>
                <HBox spacing="20" alignment="CENTER">
                    <RadioButton fx:id="radio3x3" text="3x3" selected="true">
                        <toggleGroup>
                            <ToggleGroup fx:id="laplacianMaskSize" />
                        </toggleGroup>
                    </RadioButton>
                    <RadioButton fx:id="radio5x5" text="5x5" toggleGroup="$laplacianMaskSize" />
                </HBox>
                <Button text="DETECT!" onAction="#applyLaplacian" />
            </VBox>
        </Tab>
    </TabPane>

    <HBox spacing="20" alignment="CENTER">
        <Button text="Save" onAction="#handleSave" />
        <Button text="Reset" onAction="#handleReset" />
    </HBox>
</VBox>